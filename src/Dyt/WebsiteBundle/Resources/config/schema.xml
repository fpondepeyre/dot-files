<?xml version="1.0" encoding="utf-8"?>

<database name="default" namespace="Dyt\WebsiteBundle\Model">

    <table name="classroom">
        <column name="id" type="integer" primaryKey="true" autoIncrement="true" required="true"/>
        <column name="school_id" type="integer" required="false"/>
        <column name="name" type="varchar" size="255" required="true" primaryString="true"/>

        <foreign-key foreignTable="school" name="classroom_school">
            <reference local="school_id" foreign="id"/>
        </foreign-key>

        <index name="school">
            <index-column name="school_id"/>
        </index>

        <behavior name="timestampable"/>

    </table>

    <table name="ref_level">
        <column name="id" type="integer" primaryKey="true" autoIncrement="true" required="true"/>
        <column name="culture" type="varchar" size="2" required="true"/>
        <column name="level" type="varchar" size="45" required="true" primaryString="true"/>
        <column name="short_level" type="varchar" size="15" required="true"/>

        <behavior name="timestampable"/>

    </table>

    <table name="school">
        <column name="id" type="integer" primaryKey="true" autoIncrement="true" required="true"/>
        <column name="fos_user_id" type="integer" required="false"/>
        <column name="name" type="varchar" size="100" required="true" primaryString="true"/>

        <foreign-key foreignTable="fos_user" name="school_fos_user">
            <reference local="fos_user_id" foreign="id"/>
        </foreign-key>

        <index name="fos_user_id">
            <index-column name="fos_user_id"/>
        </index>

        <behavior name="timestampable"/>

    </table>

    <table name="student">
        <column name="id" type="integer" primaryKey="true" autoIncrement="true" required="true"/>
        <column name="classroom_id" type="integer" required="false"/>
        <column name="ref_level_id" type="integer" required="false"/>
        <column name="first_name" type="varchar" required="true" size="45"/>
        <column name="last_name" type="varchar" required="true" size="45"/>
        <column name="birthday" type="date" required="false"/>
        <column name="sex" type="varchar" required="false" size="1"/>

        <foreign-key foreignTable="classroom" name="student_classroom">
            <reference local="classroom_id" foreign="id"/>
        </foreign-key>
        <foreign-key foreignTable="ref_level" name="student_ref_level">
            <reference local="ref_level_id" foreign="id"/>
        </foreign-key>

        <index name="classroom">
            <index-column name="classroom_id"/>
        </index>
        <index name="ref_level_id">
            <index-column name="ref_level_id"/>
        </index>

        <behavior name="timestampable"/>

    </table>

    <table name="label">
        <column name="id" type="integer" primaryKey="true" autoIncrement="true" required="true"/>
        <column name="classroom_id" type="integer" required="true"/>
        <column name="template" type="varchar" required="true"/>
        <column name="name" type="varchar" required="true"/>

        <foreign-key foreignTable="classroom" name="label_classroom">
            <reference local="classroom_id" foreign="id"/>
        </foreign-key>

        <behavior name="timestampable"/>

    </table>

    <table name="zone">
        <column name="id" type="integer" primaryKey="true" autoIncrement="true" required="true"/>
        <column name="label_id" type="integer" required="true"/>
        <column name="name" type="varchar" required="true"/>
        <column name="template" type="longvarchar" required="false"/>

        <foreign-key foreignTable="label" name="zone_label">
            <reference local="label_id" foreign="id"/>
        </foreign-key>

        <behavior name="timestampable"/>

    </table>

</database>
